<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title th:text="${nName}"></title>
    <script language="javascript" src="/js/jquery-3.6.0.js"></script>
    <link rel="stylesheet" href="/css/chapterList.css">
</head>
<body background="/images/login-bg.jpg">

<header>
    <div th:if="${hNo} eq 1">
        <div class="cUser" onclick="switchTo(1)">用户管理</div>
        <div class="downLine"></div>
    </div>
    <div th:unless="${hNo} eq 1">
        <div class="cNovel" onclick="switchTo(2)">作者列表</div>
        <div class="downLine"></div>
    </div>
    <div th:if="${hNo} eq 1">
        <div class="cNovel" onclick="switchTo(3)">小说管理</div>
        <div class="downLine"></div>
    </div>
    <div th:unless="${hNo} eq 1">
        <div class="cNovel" onclick="switchTo(4)">小说列表</div>
        <div class="downLine"></div>
    </div>
    <div th:if="${hNo} eq 1" >
        <div class="cNovel" onclick="switchTo(5)">评论管理</div>
        <div class="downLine"></div>
    </div>
    <div>
        <div class="cNovel" onclick="switchTo(6)">我的主页</div>
        <div class="downLine"></div>
    </div>
    <div>
        <div style="display: flex">
            <img th:src="${currentUser.imageUrl}" style="width: 50px;height: 50px;border-radius: 50%;"  alt=""/>
            <div class="ccUser" th:text="|您好！${currentUser.name}|"></div>
        </div>
        <input type=hidden id="cUserId" th:value="${currentUser.id}" />
        <div th:if="${currentUser.status} eq 3" class="cDetails" onclick="switchTo(7)">我的书架</div>
        <div th:if="${currentUser.status} eq 2" class="cDetails" onclick="switchTo(7)">我的作品</div>
        <div class="cDetails" onclick="switchTo(6)">个人信息</div>
        <div class="signOut" onclick="switchTo(8)">退出</div>
        <div class="downLine"></div>
    </div>
</header>

<div class="chaMain">
    <nav class="des">
        <div><img th:src="${novel.imgUrl}"></div>
        <div>小说名：
            <scan th:text="${novel.nName}"></scan>
        </div>
        <div>作者：<a th:text="${user.name}" th:href="'/user/toHomePage?uid='+${user.id}"></a></div>
        <div>小说简介：
            <sacn th:text="${novel.details}"></sacn>
        </div>
        <div>状态：
            <sacn th:text="${novel.status}"></sacn>
        </div>
        <div>评分：
            <sacn th:text="${novel.score}"></sacn>
        </div>

        <div class="wrapper">
            打分：
            <span id="result"></span>
            <ul id="star">
                <li title="1分">★</li>
                <li title="2分">★</li>
                <li title="3分">★</li>
                <li title="4分">★</li>
                <li title="5分">★</li>
            </ul>
        </div>
        <button th:if="${isCollect} eq 0" th:value="${novel.id}" onclick="addNovelToBookshelf(this.value)">加入书架</button>
        <div  th:if="${isCollect} eq 1" >已加入书架</div>
    </nav>
    <main>
        <ul class="chaList" th:each="chapter:${chapters1}">
            <li th:text="${chapter.cName}" th:value="${chapter.id}" onclick="toRead(this.value)"></li>
        </ul>
    </main>
    <main>
        <ul class="chaList" th:each="chapter:${chapters2}">
            <li th:text="${chapter.cName}" th:value="${chapter.id}" onclick="toRead(this.value)"></li>
        </ul>
    </main>
</div>


<div th:if="${pageObj.totalPage}<30">
    <div class="num">
        <div th:each="i:${#numbers.sequence(1, pageObj.totalPage)}" class="paging-area">
            <a th:unless="${pageObj.pageNum == (i - 1)}"
               th:href="'/novel/toChapterList?nid=' + ${novel.id} + '&&pageNo=' + ${i}" th:text="${i}"></a>
            <div th:if="${pageObj.pageNum == (i - 1)}" th:text="${i}"></div>
        </div>
        <div>
            <input id="currentPNo1" type="hidden" th:value="${pageNo}"/>
            <a th:if="${pageNo} > 1" th:href="'/novel/toChapterList?nid=' + ${novel.id} + '&&pageNo=' + ${pageNo-1}"
               style="text-decoration-line: none;color: saddlebrown">上一页</a>
            <a th:unless="${pageNo} eq ${pageObj.totalPage}"
               th:href="'/novel/toChapterList?nid=' + ${novel.id} + '&&pageNo=' + ${pageNo+1}"
               style="text-decoration-line: none;color: saddlebrown">下一页</a>
        </div>
        <div class="current" th:text="|当前在第 ${pageNo} 页|"></div>
    </div>
</div>
<div th:if="${pageObj.totalPage}>=30">
    <div class="num">
        <div th:each="i:${#numbers.sequence(1, pageObj.totalPage/3)}" class="paging-area">
            <a th:unless="${pageObj.pageNum == (i - 1)}"
               th:href="'/novel/toChapterList?nid=' + ${novel.id} + '&&pageNo=' + ${i}" th:text="${i}"></a>
            <div th:if="${pageObj.pageNum == (i - 1)}" th:text="${i}"></div>
        </div>
    </div>
    <div class="num">
        <div th:each="i:${#numbers.sequence(pageObj.totalPage/3+1, 2*pageObj.totalPage/3)}" class="paging-area">
            <a th:unless="${pageObj.pageNum == (i - 1)}"
               th:href="'/novel/toChapterList?nid=' + ${novel.id} + '&&pageNo=' + ${i}" th:text="${i}"></a>
            <div th:if="${pageObj.pageNum == (i - 1)}" th:text="${i}"></div>
        </div>
    </div>
    <div class="num">
        <div th:each="i:${#numbers.sequence(2*pageObj.totalPage/3, pageObj.totalPage)}" class="paging-area">
            <a th:unless="${pageObj.pageNum == (i - 1)}"
               th:href="'/novel/toChapterList?nid=' + ${novel.id} + '&&pageNo=' + ${i}" th:text="${i}"></a>
            <div th:if="${pageObj.pageNum == (i - 1)}" th:text="${i}"></div>
        </div>
        <div>
            <input id="currentPNo2" type="hidden" th:value="${pageNo}"/>
            <a th:if="${pageNo} > 1" th:href="'/novel/toChapterList?nid=' + ${novel.id} + '&&pageNo=' + ${pageNo-1}"
               style="text-decoration-line: none;color: saddlebrown">上一页</a>
            <a th:unless="${pageNo} eq ${pageObj.totalPage}"
               th:href="'/novel/toChapterList?nid=' + ${novel.id} + '&&pageNo=' + ${pageNo+1}"
               style="text-decoration-line: none;color: saddlebrown">下一页</a>
        </div>
        <div class="current" th:text="|当前在第 ${pageNo} 页|"></div>
    </div>
</div>


<script type="text/javascript" src="/js/chapterList.js"></script>
</body>
</html>